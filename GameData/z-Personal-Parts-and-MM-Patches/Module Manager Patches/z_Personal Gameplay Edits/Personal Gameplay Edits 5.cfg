// ---- Mods Edited ----
//
// DavonTCsystemsMod
// JFJohnny5 (K2 Pod)
// Deadly Reentry
// BahaSP
// KOSMOS
// Klockheed_Martian_SSE
// QuantumStrutsContinued
// KerbalGPS
// ResearchBodies
// Mk3MiniExpansion
// PEBKAC
// Cormorant Aeronology
// CryoEngines
// KOS
// GPOSpeedFuelPump
// VenStockRevamp
// Oblivion Aerospace
//
// ---- DavonTCsystemsMod ----

//@PART[DifferentialThrustModule]:Final
//{
//	@TechRequired = start
//	%PhysicsSignificance = 1
//	@cost = 500
//}

// ---- JFJohnny5 (K2 Pod)----

@PART[K2Pod]
{
	@TechRequired = advRocketry
	@entryCost = 3800
	@cost = 1700
	@mass = 1.6
	@crashTolerance = 20
	%CoMOffset = 0.0, -0.08, 0.0

	@RESOURCE[ElectricCharge]
	{
		@amount = 100
		@amount *= #$/CrewCapacity$
		@amount += 150
		@amount += #$maxAmount$
		@maxAmount = #$amount$
	}

	%MODULE[ModuleSAS]
	{
		%name = ModuleSAS
	}

	@RESOURCE[MonoPropellant]
	{
		@amount = 25
		@maxAmount = 25
	}
	
	@MODULE[ModuleReactionWheel]
	{		
		@RESOURCE[ElectricCharge]
		{
			@rate = 0.38
		}
	}

	MODULE
	{
		name = ModuleAblator
		ablativeResource = Ablator
		lossExp = -7500
		lossConst = 0.1
		pyrolysisLossFactor = 6000
		reentryConductivity = 0.01
		ablationTempThresh = 500
		charMin = 1.0 // Disable ablative darkening (hopefully)
		charMax = 1.0 // Ditto
		charAlpha = 0.0
	}

	RESOURCE
	{
		name = Ablator
		amount = 200
		maxAmount = 200
	}	

//	skinInternalConductionMult:FOR[DeadlyReentry] = 0.0001
//
//	%MODULE[ModuleHeatShield]:FOR[DeadlyReentry]:NEEDS[DeadlyReentry] {
//		%name = ModuleHeatShield
//		%ablativeResource = AblativeShielding
//		%lossExp = -5000
//		%lossConst = 5
//		%pyrolysisLossFactor = 120
//		%reentryConductivity = 0.001
//		%ablationTempThresh = 500
//		%depletedMaxTemp = 1200
//		%charMin = 1
//		%charMax = 1
//		%charAlpha = 1
//	}
//
//	%RESOURCE[AblativeShielding]:FOR[DeadlyReentry]:NEEDS[DeadlyReentry] {
//		%name = AblativeShielding
//		%amount = 150
//		%maxAmount = 150
//	}
}

// ---- Deadly Reentry ----

@PART[decoupler_ftr_smaller]:FOR[DeadlyReentry]:FINAL
{
	@TechRequired = start

	@RESOURCE[AblativeShielding] {
		@name = AblativeShielding
		@amount = 120
		@maxAmount = 120
	}
}

@PART[1.25_Heatshield|decoupler_ftr_small]:FOR[DeadlyReentry]:FINAL
{
	@TechRequired = start

	@RESOURCE[AblativeShielding] {
		@name = AblativeShielding
		@amount = 200
		@maxAmount = 200
	}
}

@PART[2.5_Heatshield|decoupler_ftr]:FOR[DeadlyReentry]:FINAL
{
	@TechRequired = heavyRocketry

	@RESOURCE[AblativeShielding] {
		@name = AblativeShielding
		@amount = 800
		@maxAmount = 800
	}
}

@PART[3.75_Heatshield|decoupler_ftr_4m]:FOR[DeadlyReentry]:FINAL
{
	@TechRequired = veryHeavyRocketry
	
	@RESOURCE[AblativeShielding] {
		@name = AblativeShielding
		@amount = 1800
		@maxAmount = 1800
	}
}

// ---- BahaSP ----

@PART[bahaTrrEngine]
{
	@MODULE[ModuleEngines]
	{
		@atmosphereCurve
		{
			@key,0 = 0 340
			@key,1 = 1 290
		}
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 1
	}
}

@PART[RetRCSBlock|RetRCSBlockC] 
{
	@mass = 0.0625
}

//@PART[BD_Adj_LG_Large]:FOR[BahaSP]:NEEDS[DeadlyReentry] {
//	@maxTemp = 933.15
//	@emissiveConstant = 0.85
//	@thermalMassModifier = 1
//	%skinMaxTemp = 2130
//	%skinThermalMassModifier = 0.436125055
//	%skinInternalConductionMult = 0.0000105
//	%skinMassPerArea = 0.8148148148148148
//	%leaveTemp = True
//	MODULE {
//		name = ModuleAeroReentry
//	}
//}
//
//@PART[BD_Adj_LG_Medium]:FOR[BahaSP]:NEEDS[DeadlyReentry] {
//	@maxTemp = 933.15
//	@emissiveConstant = 0.85
//	@thermalMassModifier = 1
//	%skinMaxTemp = 2130
//	%skinThermalMassModifier = 0.436125055
//	%skinInternalConductionMult = 0.0000105
//	%skinMassPerArea = 0.8148148148148148
//	%leaveTemp = True
//	MODULE {
//		name = ModuleAeroReentry
//	}
//}
//
//@PART[BD_Adj_LG_Side]:FOR[BahaSP]:NEEDS[DeadlyReentry] {
//	@maxTemp = 933.15
//	@emissiveConstant = 0.85
//	@thermalMassModifier = 1
//	%skinMaxTemp = 2130
//	%skinThermalMassModifier = 0.436125055
//	%skinInternalConductionMult = 0.0000105
//	%skinMassPerArea = 0.8148148148148148
//	%leaveTemp = True
//	MODULE {
//		name = ModuleAeroReentry
//	}
//}

// ---- KOSMOS ----

@PART[Kosmos_Balka_1_Skeleton_RCS_Storage|Kosmos_Balka_1_Tunnel|Kosmos_Balka_1_Skeleton]
{
	@TechRequired = advElectrics
	%vesselType = Station
}

@PART[Kosmos_Balka_PanelBlock1_Single]
{
	@TechRequired = advElectrics	
	@mass = 0.75
	@entryCost = 124800
	@cost = 27600
	%bulkheadProfiles = srf
	%thermalMassModifier = 2.0
	%emissiveConstant = 0.95
	%heatConductivity = 0.04 // 1/3 the default

	%MODULE[ModuleDeployableSolarPanel] {
		%name = ModuleDeployableSolarPanel
		%chargeRate = 75
		%animationName = open
		%raycastTransformName = sunCatcherLeft
		%pivotName = ArmLeft01_main
		%resourceName = ElectricCharge
		%trackingSpeed = 0.1
	}
}

@PART[Kosmos_Balka_PanelBlock1]
{
	@node_stack_bottom = 0.0, -0.381, 0.0, 0.0, -1.0, 0.0, 1
	@TechRequired = advElectrics
	@mass = 1.5
	@entryCost = 249600
	@cost = 55200
	%bulkheadProfiles = srf
	%thermalMassModifier = 2.0
	%emissiveConstant = 0.95
	%heatConductivity = 0.04 // 1/3 the default

	%MODULE[ModuleDeployableSolarPanel],0 {
		%name = ModuleDeployableSolarPanel
		%animationName = open_panel
		%raycastTransformName = sunCatcherLeft
		%pivotName = ArmLeft01_main
		%resourceName = ElectricCharge
		%chargeRate = 150
		%trackingSpeed = 0.1
	}

	%MODULE[ModuleDeployableSolarPanel],1 {
		%name = ModuleDeployableSolarPanel
		%animationName = rotary
		%raycastTransformName = sunCatcherRight
		%pivotName = Main_Rotary_Pivot
		%resourceName = ElectricCharge
		%chargeRate = 0
		%trackingSpeed = 0.1
	}
}

// ---- Klockheed_Martian_SSE  ----

@PART[KM_sparkler]:Final
{
	@TechRequired = start
	@cost = 10
	@entryCost = 100
	@maxTemp = 4800
	%PhysicsSignificance = 1
}

// ---- QuantumStrutsContinued ----

@PART[QuantumStrut|StrutGun]:Final
{
	@TechRequired = start
	%PhysicsSignificance = 1
}

// ---- KerbalGPS ----

@PART[FigaroReceiver]:Final
{
//	@mass = 0.0015
	%PhysicsSignificance = 1
}

// ---- ResearchBodies ----

@PART[TrackBodiesTelescope]
{
	@MODULE[ModuleTrackBodies]
	{
		@maxTrackDistance = 7500000000000
	}

	MODULE[ModuleReactionWheel] 
	{
		name = ModuleReactionWheel
		PitchTorque = 1
		YawTorque = 1
		RollTorque = 1
		RESOURCE
		{
			name = ElectricCharge
			rate = 0.01
		}
	}

	MODULE
	{
		name = ModuleSAS
		SASServiceLevel = 3
	}

// Personal Preferences in Resource Distribution. Not enabled by default, but may after playing with it some in future playthroughs.

	@mass += 1.4 

	@RESOURCE[ElectricCharge]
	{
		@amount = 750
		@maxAmount = 750
	}

	@RESOURCE[MonoPropellant]
	{
		@amount = 150
		@maxAmount = 150
	}
}

// ---- Mk3MiniExpansion ----

@PART[mk3_shuttle_noseCone]
{
	@TechRequired = heavyAerodynamics
}

// ---- PEBKAC ----

@PART[pkLES_jettison|pkLES_Stock_2m|pkLaunchEscapeSystemA|pkLES_Stock_2m_NoBPC|pkLES_nose]
{
	@TechRequired = commandModules
}

// ---- Cormorant Aeronology ----

@PART[Cormorant?Aeronology_*]
{
	@TechRequired = heavyAerodynamics
}

@PART[Cormorant?Aeronology_NoseCone]:FOR[GPOSpeedFuelPump]
{
	%MODULE[GPOSpeedPump]
	{
		%name = GPOSpeedPump
	}
}

// ---- CryoEngines ----

@PART[cryoengine-*]:FINAL {
	@entryCost *= 0.9
	@cost *= 0.9
}

+PART[cryoengine-125-2] {
	@name = cryoengine-125-3-Again
	@title = RL10B 'Dachnyy' Cryogenic Rocket Engine
	@mass = 1
	@entryCost = 5880
	@cost = 3360

	@MODULE[ModuleEngines*] {
		@maxThrust = 100

		!atmosphereCurve {}
		atmosphereCurve {
			key = 0 450
			key = 1 100
			key = 4 0.001
		}
	}
}

@PART[cryoengine-25-2] {
	@MODULE[ModuleEngines*]{
		@maxThrust = 375
	}
}

// ---- KOS ----

@PART[kOSMachine0m] {
	@mass = 0.01
}

@PART[kOSMachine1m] {
	@mass = 0.04
}

@PART[kOSMachineRad] {
	@mass = 0.02
}

// ---- GPOSpeedFuelPump ----

@PART[*]:HAS[!RESOURCE[ElectricCharge],!RESOURCE[SolidFuel],@RESOURCE[*],!MODULE[GPOSpeedPump]]:FOR[GPOSpeedFuelPump]:BEFORE[InterstellarFuelSwitch]
{
	MODULE
	{
		name = GPOSpeedPump
	}
}

// ---- VenStockRevamp ----

@PART[1x3WPanels]
{
	@mass = 0.04
}

@PART[1x3SPanels]
{
	@TechRequired = advElectrics
}

// ---- Oblivion Aerospace ----

//@PART[ObConicalHeatShield1]:FOR[DeadlyReentry] {
//	@TechRequired = start
//
//	@RESOURCE[Ablator] {
//		@name = AblativeShielding
//		@amount = 200
//		@maxAmount = 200
//	}
//}
//
//@PART[ObConicalHeatShield2DR]:FOR[DeadlyReentry] {
//	@TechRequired = heavyRocketry
//
//	@RESOURCE[Ablator] {
//		@name = AblativeShielding
//		@amount = 800
//		@maxAmount = 800
//	}
//}
//
//@PART[ObConicalHeatShield3DR]:FOR[DeadlyReentry] {
//	@TechRequired = veryHeavyRocketry
//
//	@RESOURCE[Ablator] {
//		@name = AblativeShielding
//		@amount = 1800
//		@maxAmount = 1800
//	}
//}

//@PART[ObConicalHeatShield1DR|ObConicalHeatShield2DR|ObConicalHeatShield3DR]:FOR[DeadlyReentry] {
//	@thermalMassModifier = 1.0
//
//	!MODULE[ModuleAblator] {}
//
//	MODULE
//	{
//		name = ModuleHeatShield
//		ablativeResource = AblativeShielding
//		lossExp = -6000
//		lossConst = 5
//		pyrolysisLossFactor = 120
//		reentryConductivity = 0.001
//		ablationTempThresh = 500
//		depletedMaxTemp = 1200
//		charMin = 1
//		charMax = 1
//		charAlpha = 1
//		leaveTemp = True
//	}
//}



























